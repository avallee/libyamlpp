stream ::= stream_begin directive* headless_document document* footless_document stream_end
         | stream ::= stream_begin directive* headless_document footless_document stream_end
         | stream ::= stream_begin directive* headless_document stream_end
         | stream ::= stream_begin directive* footless_document stream_end
         | stream ::= stream_begin directive* headfootless_document stream_end
         | stream_begin directive* document* stream_end

# TODO:  how does a stream begin?  encoding information?
stream_begin ::= ""

# TODO:  how does a stream end?
stream_end ::= ""

directive ::= version_directive
            | tag_directive

version_directive ::= "%YAML" [0-9] "." [0-9]

tag_directive ::= "%TAG" handle uri

#TODO:  is the second alternative correct?  what i want to say is that a
#       document may start with document_begin, followed by a node and then
#       either a document_end or nothing at all.  i don't think i can say
#       it ends with document_end or stream_end, because a stream is defined
#       to always end with a stream_end, so document shouldn't consume the
#       final stream_end (and there should only be one stream end, right?).
document ::= document_begin node* document_end

headless_document ::= node* document_end

headfootless_document ::= node*

footless_document ::= document_begin node*

document_begin ::= "---"

document_end ::= "..."

node ::= alias
       | scalar
       | sequence
       | mapping

# TODO:  define grammar for an alias
alias ::= ""

scalar ::= string
        | null
        | tag string

string ::= [^!].*

null ::= "null"

tag ::= "!" local_tag
     | "!!" standard_tag
     | "!" handle "!" local_tag
     | "tag:" uri ":" local_tag

local_tag ::= [a-zA-Z_]+

standard_tag ::= "str"

handle ::= [a-zA-Z_]+

# TODO:  define grammar for standard URIs.  e.g., yaml.org,2002:
uri ::= ""

sequence ::= flow_sequence
           | block_sequence

flow_sequence ::= "[" node ( "," [ ]* node )* "]"
                | "[" [ ]* "]"

# TODO:  define grammar for block sequence
block_sequence ::= ""

mapping ::= flow_mapping
          | block_mapping

flow_mapping ::= "{" scalar [ ]* ":" [ ]* node ( "," [ ]* scalar [ ]* ":" [ ]* node )* "}"
               | "{" complex_mapping [ ]* ":" [ ]* node ( "," [ ]* complex_mapping [ ]* ":" [ ]* node )* "}"
               | "{" [ ]* "}"

# TODO:  define complex mapping
complex_mapping ::= ""

# TODO:  define grammar for a block mapping
block_mapping ::= ""
